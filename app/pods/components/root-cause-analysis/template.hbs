<div class="object-browser layout-row">
    <div class="panel container flex-20">
        <div class="input-fields">
            <h3>Analysis Input</h3>
            Selected Relationship:
            {{#paper-menu as |menu|}}
                {{#menu.trigger width=4}}
                    {{#paper-button}}{{if root root.label model.[0].label}}{{/paper-button}}
                {{/menu.trigger}}
                {{#menu.content width=2 as |content|}}
                    {{#each model as |item|}}
                    {{#content.menu-item onClick=(action 'updateRoot' item)}}
                        {{paper-icon item.label}}
                        <span>{{item.label}}</span>
                    {{/content.menu-item}}
                    {{/each}}
                {{/menu.content}}
            {{/paper-menu}}
        </div>
        
    </div>
    <div class="object-list layout-column container flex-80">
        <div class="graph-container container-segment layout-row">
            {{#visjs-network class="graph-view flex-80"}}
                {{visjs-node nId="0" label="0" color='#ff0000'}}
                {{visjs-node nId="1" label="1" color='#ff0000'}}
                {{visjs-node nId="2" label="2"}}
                {{visjs-node nId="3" label="3"}}
                {{visjs-node nId="4" label="4"}}
                {{visjs-node nId="5" label="5"}}
                {{visjs-node nId="6" label="6"}}
                {{visjs-node nId="7" label="7"}}
                {{visjs-node nId="8" label="8"}}
                {{visjs-node nId="9" label="9"}}
            {{#each model as |x|}}
                {{visjs-edge from=x.source to=x.target color='#C7F110'}}
            {{/each}}
            {{/visjs-network}}
            {{#paper-list class="scroll-div flex-30"}}
            {{#paper-subheader}}{{allPaths.length}} Paths from '{{root.source}}' to '{{root.target}}' ({{pathStats.iterations}}:{{pathStats.time}}s){{/paper-subheader}}
            {{#each computedPaths as |path|}}
                {{#paper-item class="md-3-line"}}

                <div class="md-list-item-text">
                    <p>[
                    {{#each path as |item|}}
                    {{item.label}},
                    {{/each}}
                    ]</p>
                </div>
                {{/paper-item}}
            {{/each}}
        {{/paper-list}}
        </div>
        
        {{#paper-list class="scroll-div flex-50"}}
            {{#paper-subheader}}Mock Network Events{{/paper-subheader}}
            {{#each model as |item|}}
                {{#paper-item onClick=(action 'openModal' item) class="md-3-line"}}
                
                <div class="md-list-item-text">
                    <h3>Network Performance Object:<b>{{item.id}}</b></h3>
                    <p>Source: {{item.source}} Target {{item.target}}</p>
                </div>
                {{/paper-item}}
            {{/each}}
        {{/paper-list}}
        
    </div>
</div>

{{#if computeToast}}
  {{#paper-toast capsule=true onClose=(action "toggleToast") as |toast|}}
    {{#toast.text}}Analysis Complete{{/toast.text}}
    {{#paper-button accent=true onClick=(action "toggleToast")}}Undo{{/paper-button}}
  {{/paper-toast}}
{{/if}}

{{#if editEdge}}
  {{#paper-dialog fullscreen=true onClose=(action "closeModal" editingEdge "cancel")}}

    {{#paper-dialog-content}}
      <h2 class="md-title">Edit Edge '{{editingEdge.label}}'</h2>
      <h2>Metrics:</h2>
      {{#each editingEdge.data as |timestamp|}}
        <div class="model-timestamp">
        <h3>Timestamp: {{timestamp.timestamp}}</h3>
        <h5>Delay</h5>
        Crit: {{paper-input placeholder=timestamp.metrics.delayP95.critical autofocus=true value=timestamp.metrics.delayP95.critical onChange=(action (mut timestamp.metrics.delayP95.critical))}}
        Maj: {{paper-input placeholder=timestamp.metrics.delayP95.major autofocus=true value=timestamp.metrics.delayP95.major onChange=(action (mut timestamp.metrics.delayP95.major))}}
        <h5>Jitter</h5>
        Crit: {{paper-input placeholder=timestamp.metrics.jitterP95.critical autofocus=true value=timestamp.metrics.jitterP95.critical onChange=(action (mut timestamp.metrics.jitterP95.critical))}}
        Maj: {{paper-input placeholder=timestamp.metrics.jitterP95.major autofocus=true value=timestamp.metrics.jitterP95.major onChange=(action (mut timestamp.metrics.jitterP95.major))}}
        <h5>PacketLost</h5>
        Crit: {{paper-input placeholder=timestamp.metrics.packetsLost.critical autofocus=true value=timestamp.metrics.packetsLost.critical onChange=(action (mut timestamp.metrics.packetsLost.critical))}}
        Maj: {{paper-input placeholder=timestamp.metrics.packetsLost.major autofocus=true value=timestamp.metrics.packetsLost.major onChange=(action (mut timestamp.metrics.packetsLost.major))}}
        </div>
      {{/each}}
    {{/paper-dialog-content}}

    {{#paper-dialog-actions class="layout-row"}}
      <span class="flex"></span>
      {{#paper-button primary=true onClick=(action "closeModal" editingEdge "cancel")}}Cancel{{/paper-button}}
      {{#paper-button primary=true onClick=(action "closeModal" editingEdge "save")}}Save{{/paper-button}}
    {{/paper-dialog-actions}}

  {{/paper-dialog}}
{{/if}}

{{yield}}